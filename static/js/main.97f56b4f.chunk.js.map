{"version":3,"sources":["context/AppReducer.js","context/GlobalState.js","components/SearchItem.js","components/SearchResults.js","components/Header.js","components/Trade.js","components/TradeList.js","components/Backtest.js","components/Homepage.js","components/BacktestList.js","components/AddBacktest.js","components/chart-components/Candle.js","components/chart-components/CrossHairs.js","components/chart-components/Chart.js","components/GraphSection.js","App.js","index.js"],"names":["logger","state","action","type","backtests","filter","backtest","id","payload","graphData_AV_API","symbol_list","current_symbol","cache_TSDA","current_company","cache_TS15min","cache_TS60min","graph_type","initialState","GlobalContext","createContext","GlobalProvider","children","useReducer","AppReducer","dispatch","data","a","Note","alert","searchInputClear","searchInput","fetch","text","response","json","new_symbol_list","Object","keys","bestMatches","forEach","e","new_symbol","symbol","name","reverse","selectedSymbol","selectedCompany","graphType","doClearCache","interval_API","cache_exists","function_API","outputSize","Provider","value","deleteBacktest","addBacktest","clearSearch","stockSearch","graphSymbol","cache_TSDA_function","CSS","styled","div","SearchItem","mySymbol","useContext","className","onClick","SearchResults","useState","setSearch","ref","wrapperRef","useRef","useEffect","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","length","map","Header","href","rel","integrity","crossOrigin","src","alt","onSubmit","preventDefault","placeholder","onChange","Trade","props","trade","buyDate","buyPrice","indicatorAtBuy","sellDate","sellPrice","indicatorAtSell","numShares","toFixed","profitUSD","profitPercent","candleLength","TradeList","tradeList","myId","Backtest","getTodayDate","Date","toISOString","slice","getOldDate","setFullYear","getFullYear","tradeListData","setTradeListData","seriesType","setSeriesType","indicator","defaultTimePeriod","timePeriod","setTimePeriod","stdDeviation","setStdDeviation","startDate","setStartDate","endDate","setEndDate","maxBags","setMaxBags","initalBalance","setInitialBalance","initalBuyType","setInitalBuyType","initalBuyAmount","setInitalBuyAmount","defaultBuyStrat","buyStrategyValue","setBuyStrategyValue","buyStrategyType","setBuyStrategyType","sellStrategyValue","setSellStrategyValue","dropdownItems","items","item","calcInitalBuy","buyType","buyAmount","currentBalance","curStockPrice","isBuyConditionMet","curIndicatorValue","getIndicatorJSON","finalizeTrade","myBag","candleCountSell","percentChange","push","numTrades","netBars","netSellVolume","paperAPICall","pairSettings","stockPriceData","optionalParameters","stockIndicatorData","candleCount","bagList","startDateReached","lowestSellPrice","entries","key","startPrice","endPrice","newBagVolume","console","log","Math","min","newBagListKeys","holdReturn","profitPercentOnBalance","profitPercentOnTrades","avgBars","runBacktests","indicatorSettingDOM","buyStrategyDOM","tradeData","Homepage","BacktestList","AddBacktest","newBacktest","uuid","Candle","x","candle_width","pixelFor","up","close","open","bar_top","bar_bottom","bar_height","wick_top","high","wick_bottom","low","y","width","height","abs","classNames","candle","down","wick","top","x1","y1","x2","y2","bottom","CrossHairs","chart_dims","pixel_width","cross_hair","horz","pixel_height","vert","Chart","chart_width","chart_height","mouseCoords","setMouseCoords","dollar_high","max","apply","bar","dollar_low","floor","dollar_delta","dollarAt","pixel","dollar","candleDataAt","candleChange","change","graphTypeStr","onMouseMove","nativeEvent","round","currentTarget","getBoundingClientRect","left","offsetX","offsetY","onMouseLeave","i","candle_x","fill","rx","ry","fontSize","dateString","myYear","substring","myMonth","parseInt","myDay","convertDate","englishStr","changePercent","changeUSD","mouseOffChartJSX","GraphSection","myWindow","undefined","windowSize","setWindowSize","handleResize","window","innerWidth","innerHeight","useWindowSize","processGraphData","time_series_type","time_series_isDaily","split_ratio","graphDataProcessed","date_counter","previous_date","stop_graphing","myDate","substr","flat_candle","setData","App","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.97f56b4f.chunk.js","sourcesContent":["const logger = (state, action) => {\n  switch(action.type) {\n    case 'DELETE_BACKTEST':\n      return {\n        ...state,\n        backtests: state.backtests.filter(backtest => backtest.id !== action.payload)\n      }\n    case 'ADD_BACKTEST':\n      return {\n        ...state,\n        backtests: [action.payload, ...state.backtests]\n      }\n    case 'STOCK_SEARCH':\n      return {\n        ...state,\n        graphData_AV_API: state.graphData_AV_API,\n        symbol_list: action.payload,\n        current_symbol: state.current_symbol\n      }\n    case 'MAX_API':\n      return {\n        ...state\n      }\n    case 'FILL_CACHE_TSDA':\n      return {\n        ...state,\n        cache_TSDA: action.payload['Time Series (Daily)'] ? action.payload : state.cache_TSDA\n      }\n    case 'DISPLAY_GRAPHS':\n      return {\n        ...state,\n        graphData_AV_API: action.payload[1],\n        symbol_list: [],\n        current_symbol: action.payload[1]['Meta Data']['2. Symbol'],\n        current_company: action.payload[2],\n        cache_TSDA: action.payload[1]['Time Series (Daily)'] ? action.payload[1] : state.cache_TSDA,\n        cache_TS15min: action.payload[1]['Time Series (15min)'] ? action.payload[1] : state.cache_TS15min,\n        cache_TS60min: action.payload[1]['Time Series (60min)'] ? action.payload[1] : state.cache_TS60min,\n        graph_type: action.payload[0]\n      }\n    default:\n      return state;\n  }\n}\n\nexport default logger;\n","import React, { createContext, useReducer } from 'react';\nimport AppReducer from './AppReducer';\n\n// AlphaVantage API Key = CQ5JZQYM4DG0OODA\n\n// Initial state\nconst initialState = {\n    backtests: [],     // starter code thing, can delete later\n    symbol_list: [],      // user input search results (1 API call)\n    graphData_AV_API: {}, // graphs historical stock data (1 API call)\n    current_symbol: '',   // current stock symbol being graphed\n    current_company: '',  // current stock company name being graphed\n    graph_type: '',       // tracks graph type for graphSection.js to know to add proper amount of candles to chart\n    cache_TSDA: {},        // cache AV_API for time series daily adjusted until user changes stock view(prevents unnecssary API calls)\n    cache_TS15min: {},        // cache AV_API for time series 15 min until user changes stock view(prevents unnecssary API calls)\n    cache_TS60min: {}        // cache AV_API for time series 60 min until user changes stock view(prevents unnecssary API calls)\n}\n\n// Create context\nexport const GlobalContext = createContext(initialState);\n\n// Provider component\nexport const GlobalProvider = ({ children }) => {\n    const [state, dispatch] = useReducer(AppReducer, initialState);\n\n    // Actions\n    function deleteBacktest(id) {\n        dispatch({\n        type: 'DELETE_BACKTEST',\n        payload: id\n        });\n    }\n\n    function addBacktest(backtest) {\n        dispatch({\n        type: 'ADD_BACKTEST',\n        payload: backtest\n        });\n    }\n\n    async function cache_TSDA_function(data) {\n        // If API limit: Alerts API limit reached, maintains current payload(stock data)\n        // Else: update current payload\n        if(data.Note){\n            alert(\"MAX API CALLS. Please wait a minute for more. Thank you for visitng my project! However, it was built using Alpha Vantage's standard API where the call frequency is 5 calls per minute and 500 calls per day.\");\n            dispatch({\n                type: 'MAX_API',\n                payload: data\n            });\n        }else{\n            dispatch({\n                type: 'FILL_CACHE_TSDA',\n                payload: data\n            });\n        }\n    }\n\n    // User clicks outside search results\n    async function clearSearch(searchInputClear) {\n        dispatch({\n            type: 'STOCK_SEARCH',\n            payload: []\n        });\n    }\n\n    // Updates search results from API when user searches for a stock\n    async function stockSearch(searchInput) {\n        //API call for searching stock tickers\n        let response = await fetch(`https://www.alphavantage.co/query?function=SYMBOL_SEARCH&keywords=${searchInput.text}&apikey=CQ5JZQYM4DG0OODA`);\n        let data = await response.json();\n\n        //create temp list\n        let new_symbol_list = [];\n\n        // If API limit: alerts, maintains current results(if any)\n        // Else: updates search results display properly\n        if(data.Note){\n            alert(\"MAX API CALLS. Please wait a minute for more. Thank you for visitng my project! However, it was built using Alpha Vantage's standard API where the call frequency is 5 calls per minute and 500 calls per day.\");\n            // Maintains current search results\n            dispatch({\n                type: 'MAX_API',\n                payload: new_symbol_list\n            });\n        }else{\n        //iterate over all search results\n        Object.keys(data.bestMatches).forEach( (e) => {\n            //filter non-US stocks, then add\n            if(data.bestMatches[e][\"4. region\"] === \"United States\"){\n            let new_symbol = {\n                symbol: data.bestMatches[e][\"1. symbol\"],\n                name: data.bestMatches[e][\"2. name\"]\n            }\n            new_symbol_list = [new_symbol, ...new_symbol_list];\n            }\n        });\n        new_symbol_list.reverse();\n        //update state of web app (official symbol_list)\n        dispatch({\n            type: 'STOCK_SEARCH',\n            payload: new_symbol_list\n        });\n        }\n    }\n\n    // Graphs API data based on user selected stock symbol\n    async function graphSymbol(selectedSymbol, selectedCompany, graphType, doClearCache) {\n        // Clear cache for new symbol search\n        if(doClearCache){\n            state.cache_TSDA = {};\n            state.cache_TS15min = {};\n            state.cache_TS60min = {};\n        }\n\n        // Specific API call parameters\n        let function_API;\n        let outputSize;\n        let interval_API = '';\n        let cache_exists = false;\n        let data;\n        let response;\n        switch(graphType){\n            case 'day':\n                if(state.cache_TS15min['Time Series (15min)']){\n                    cache_exists = true;\n                    data = state.cache_TS15min;\n                }else{\n                    function_API = 'TIME_SERIES_INTRADAY';\n                    interval_API = '&interval=15min';\n                    outputSize = 'compact';\n                }\n                break;\n            case 'week':\n                if(state.cache_TS60min['Time Series (60min)']){\n                    cache_exists = true;\n                    data = state.cache_TS60min;\n                }else{\n                    function_API = 'TIME_SERIES_INTRADAY';\n                    interval_API = '&interval=60min';\n                    outputSize = 'compact';\n                }\n                break;\n            default:\n                if(state.cache_TSDA['Time Series (Daily)']){\n                    cache_exists = true;\n                    data = state.cache_TSDA;\n                }else{\n                    function_API = 'TIME_SERIES_DAILY_ADJUSTED';\n                    outputSize = 'full';\n                }\n        }\n        if(!cache_exists){\n            response = await fetch(`https://www.alphavantage.co/query?function=${function_API}&symbol=${selectedSymbol}${interval_API}&outputsize=${outputSize}&apikey=CQ5JZQYM4DG0OODA`);\n            data = await response.json();\n        }\n\n\n\n        // If API limit: Alerts API limit reached, maintains current payload(stock data)\n        // Else: update current payload\n        if(data.Note){\n            alert(\"MAX API CALLS. Please wait a minute for more. Thank you for visitng my project! However, it was built using Alpha Vantage's standard API where the call frequency is 5 calls per minute and 500 calls per day.\");\n            dispatch({\n                type: 'MAX_API',\n                payload: [graphType,data]\n            });\n        }else if(data['Error Message']){\n            alert(\"ERROR. This stock does not have valid data in the Alpha Vantage database.\");\n            dispatch({\n                type: 'MAX_API',\n                payload: [graphType,data]\n            });\n        }else{\n            dispatch({\n                type: 'DISPLAY_GRAPHS',\n                payload: [graphType,data, selectedCompany]\n            });\n        }\n    }\n\n    return (<GlobalContext.Provider value={{\n        backtests: state.backtests,\n        symbol_list: state.symbol_list,\n        graphData_AV_API: state.graphData_AV_API,\n        current_symbol: state.current_symbol,\n        current_company: state.current_company,\n        cache_TSDA: state.cache_TSDA,\n        cache_TS15min: state.cache_TS15min,\n        cache_TS60min: state.cache_TS60min,\n        graph_type: state.graph_type,\n        deleteBacktest,\n        addBacktest,\n        clearSearch,\n        stockSearch,\n        graphSymbol,\n        cache_TSDA_function\n    }}>\n        {children}\n        \n    </GlobalContext.Provider>);\n}","import React, {useContext} from 'react';\nimport styled from \"styled-components\";\nimport { GlobalContext } from '../context/GlobalState';\n\nconst CSS = styled.div`\n  width: fit;\n  background: transparent;\n\n  .search-item{\n    width:100%;\n    @media only screen and (max-width: 768px) {\n      width: 200%;\n    }\n    border:none;\n\n    border-bottom: 1px solid black;\n    background: #373641;\n    padding: 16px;\n    padding-bottom: 5px;\n    font-size: 16px;\n\n    text-align: left;\n    color: #dedfe4;\n    text-transform: uppercase;\n    font-weight: 420;\n    letter-spacing: 1.5px;      \n\n    &:focus, &:hover{\n      outline: none;\n      background: #3d3d4a;\n    }\n  }\n\n  .company-name{\n    color: #898996;\n    text-transform: capitalize;\n  }\n`;\n\n//graphSymbol(mySymbol.symbol, 'day', true)\nexport const SearchItem = ({ mySymbol }) => {\n  const { graphSymbol } = useContext(GlobalContext);\n\n  return (\n    <div>\n      <CSS>\n        <button className=\"search-item\" onClick={() => graphSymbol(mySymbol.symbol, mySymbol.name, 'day', true)}>\n          <p>({mySymbol.symbol})<span className=\"company-name\"> {mySymbol.name}</span></p>\n        </button>\n      </CSS>\n    </div>\n  )\n}\n","import React, { useContext, useEffect, useRef, useState } from 'react';\nimport styled from \"styled-components\";\nimport { SearchItem } from './SearchItem';\n\nimport { GlobalContext } from '../context/GlobalState';\n\nconst CSS = styled.div`\n  position: absolute;\n  z-index:2;\n  width: 24%;\n\n`;\n\nexport const SearchResults = () => {\n  const [text, setSearch] = useState(\"\");\n  const { symbol_list, clearSearch } = useContext(GlobalContext);\n\n  // Hook that alerts clicks outside of the passed ref\n  function useOutsideAlerter(ref) {\n    useEffect(() => {\n      /**\n       * Alert if clicked on outside of element\n       */\n      function handleClickOutside(event) {\n        if (ref.current && !ref.current.contains(event.target)) {\n          // Code for user clicking outside search results\n          setSearch(\"\");\n          clearSearch(text);\n        }\n      }\n      // Bind the event listener\n      document.addEventListener(\"mousedown\", handleClickOutside);\n      return () => {\n        // Unbind the event listener on clean up\n        document.removeEventListener(\"mousedown\", handleClickOutside);\n      };\n    }, [ref]);\n  }\n\n  // Declare ref(search results) so outside can be referenced\n  const wrapperRef = useRef(null);\n  useOutsideAlerter(wrapperRef);\n\n  return (\n    symbol_list.length>0 ?\n    <div className=\"col-4\" ref={wrapperRef}>\n    <CSS>\n      {symbol_list.map(mySymbol => (<SearchItem key={mySymbol.symbol} mySymbol={mySymbol} />))}\n    </CSS>\n    </div>\n    :\n    <></>\n  )\n}\n","import React, {useState, useContext} from 'react';\nimport styled from \"styled-components\";\nimport { SearchResults } from './SearchResults';\n\nimport { GlobalContext } from '../context/GlobalState';\n\nconst CSS = styled.div`\n\n  .search {\n    &__container {\n        padding-top: 10px;\n        padding-right: 9%;\n    }\n    \n    &__title {\n        font-family: 'Lato', sans-serif; \n        font-size: 28px; \n        font-weight: 300; \n        text-align: center;\n        color: #dedfe4;\n\n        @media only screen and (max-width: 768px) {\n          padding: 0%;\n          font-size: 0%;\n        }\n    }\n    \n    &__input {\n        width: 100%;\n        padding: 2.5% 4%;\n\n        background-color: transparent;\n        transition: transform 250ms ease-in-out;\n        font-size: 12px;\n        line-height: 15px;\n        \n        color: #898996;\n        text-transform: uppercase;\n        font-weight: 520;\n        letter-spacing: 1.5px;\n        background-color: transparent;\n \n        background-image: url(\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath d='M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z'/%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3C/svg%3E\");\n        background-repeat: no-repeat;\n        background-size: 18px 18px;\n        background-position: 97% center;\n        border-radius: 50px;\n        border: 1px solid #4f4f62;\n        transition: all 250ms ease-in-out;\n        backface-visibility: hidden;\n        transform-style: preserve-3d;\n\n        @media only screen and (max-width: 768px) {\n          width: 200%;\n        }\n        \n        &::placeholder {\n            color: #898996;\n            text-transform: uppercase;\n            font-weight: 520;\n            letter-spacing: 1.5px;\n            @media only screen and (max-width: 768px) {\n              font-size: 0%;\n            }\n        }\n        \n        &:hover,\n        &:focus {\n            padding: 12px 0;\n            outline: 0;\n            border: 1px solid transparent;\n            border-bottom: 1px solid #4f4f62;\n            border-radius: 0;\n            background-position: 100% center;\n        }\n    }\n  }\n\n  .logo-img{\n    width: 115px;\n    padding: 12px 24px;\n    @media only screen and (max-width: 768px) {\n      width: 15%;\n      padding: 2%;\n    }\n  }\n\n  .credits{\n    padding-top: 10px;\n    padding-right: 2%;\n    font-size: 15px;\n    font-weight: 350;\n    text-align: center;\n    color: white;\n    @media only screen and (max-width: 768px) {\n      padding: 0 0 0 60%;\n      font-size: 80%;\n    }\n  }\n\n  background: #373641;\n\n`;\n\nexport const Header = () => {\n  const [text, setSearch] = useState('');\n\n  const { stockSearch } = useContext(GlobalContext);\n\n  //running search for stocks\n  const onSubmit = e  => {\n    e.preventDefault();\n\n    const searchInput = { text: text };\n    if(!(searchInput.text.length===0))\n      stockSearch(searchInput);\n  }\n\n  return (\n    <CSS>\n      <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1\" crossOrigin=\"anonymous\"></link>\n        \n      <nav className=\"navbar\">\n      \n        <img className=\"logo-img\" src=\"cs-chart.png\" alt=\"\"/>\n        <label className=\"search__title\" >PeakTrades</label>\n          \n        <div className=\"col-4 center search__container\"> \n          <form  onSubmit={onSubmit}>\n            <label className=\"search__title\">Search Comapny:</label>\n            <input className=\"search__input\" type=\"text\" placeholder=\"Search Tickers...\" onChange={(e) => setSearch(e.target.value)}/>\n            \n          </form>\n          <SearchResults />\n        </div>\n        <h6 className=\"credits\">\n          by <a className=\"\" href=\"https://www.linkedin.com/in/benshiao\" rel=\"noreferrer\" target=\"_blank\">Benjamin Shiao</a>\n        </h6>\n\n      </nav>\n    </CSS>\n  )\n}\n","import React from 'react';\nimport styled from \"styled-components\";\n\nconst Trade = props => {\n  const { trade } = props;\n\n\n  const CSS = styled.div`\n  \n    .trade-card{\n      margin-bottom: 10px;\n      font-size: 12px;\n      \n      display:block;\n      overflow:auto;\n\n      box-shadow: rgba(0, 0, 0, 0.25) 0px 0.0625em 0.0625em, rgba(0, 0, 0, 0.25) 0px 0.125em 0.5em, rgba(255, 255, 255, 0.1) 0px 0px 0px 1px inset;\n      background: #3d3d4a;  \n    }\n    .trade-card-sub{\n      float: left;\n      width: 33.33%;\n      padding: 1.25%;    \n    }\n    .result-item{\n      border-bottom: 2px solid #6464a3;\n      height: auto;\n      margin-bottom: 4%;\n      padding-bottom: 1%;\n    }\n    .result-title{\n      text-align: left;\n      color: #898996;\n      font-size: 12px;\n      width: 40%;\n    }\n    .result-output{\n      text-align: right;\n      color: #dedfe4;\n      font-size: 14px;\n      width: 60%;\n    }\n  `;\n  return (\n    <CSS>\n      <div className=\"trade-card\">\n        <div className=\"trade-card-sub\">\n          <div className=\"result-item\">\n            <label className=\"result-title\">Buy date: </label>\n            <label className=\"result-output\">{trade.buyDate}</label>\n          </div>\n          <div className=\"result-item\">\n            <label className=\"result-title\">Buy price: </label>\n            <label className=\"result-output\">{trade.buyPrice}</label>\n          </div>\n          <div className=\"result-item\">\n            <label className=\"result-title\">Indicator at Buy: </label>\n            <label className=\"result-output\">{trade.indicatorAtBuy}</label>\n          </div>\n        </div>\n        <div className=\"trade-card-sub\">\n          <div className=\"result-item\">\n            <label className=\"result-title\">Sell date:</label>\n            <label className=\"result-output\">{trade.sellDate}</label>\n          </div>\n          <div className=\"result-item\">\n            <label className=\"result-title\">Sell price: </label>\n            <label className=\"result-output\">{trade.sellPrice}</label>\n          </div>\n          <div className=\"result-item\">\n            <label className=\"result-title\">Indicator at Sell: </label>\n            <label className=\"result-output\">{trade.indicatorAtSell}</label>\n          </div>\n        </div>\n        <div className=\"trade-card-sub\">\n          <div className=\"result-item\">\n            <label className=\"result-title\">Number of shares:</label>\n            <label className=\"result-output\"> {trade.numShares.toFixed(2)}</label>\n          </div>\n          <div className=\"result-item\">\n            <label className=\"result-title\">Profit Percent: </label>\n            <label className=\"result-output\">${trade.profitUSD.toFixed(2)}({trade.profitPercent>0?\"+\":\"\"}{(trade.profitPercent*100).toFixed(2)}%)</label>\n          </div>\n          <div className=\"result-item\">\n            <label className=\"result-title\"> Candle Length: </label>\n            <label className=\"result-output\">{trade.candleLength}</label>\n          </div>\n        </div>\n      </div>\n      \n    </CSS>\n  )\n}\n\nexport default Trade;","import React from 'react';\nimport Trade from './Trade';\n\n//import { GlobalContext } from '../context/GlobalState';\n\nconst TradeList = props => {\n  const { tradeList } = props;\n  let myId = 0;\n  return (\n    <>\n      {tradeList.map(trade => (<Trade key={myId++} trade={trade} />))}\n    </>\n  )\n}\n\nexport default TradeList;","import React, {useState, useContext} from 'react';\nimport styled from \"styled-components\";\nimport TradeList from './TradeList';\n\nimport { GlobalContext } from '../context/GlobalState';\n//import { pairs } from 'd3';\n\nconst CSS = styled.div`\n  background: #3d3d4a;\n  color: #898996;\n  display:flex;\n\n  padding: 1%;\n  margin: 0% 0% 1% 0%;\n\n  .settings{\n    font-size: 16px;\n    padding: 1%;\n    width: 25%;\n    box-shadow: rgba(0, 0, 0, 0.25) 0px 0.0625em 0.0625em, rgba(0, 0, 0, 0.25) 0px 0.125em 0.5em, rgba(255, 255, 255, 0.1) 0px 0px 0px 1px inset;\n  }\n  .results-overview{\n    padding: 1%;\n    width: 24%;\n    font-size: 16px;\n    box-shadow: rgba(0, 0, 0, 0.25) 0px 0.0625em 0.0625em, rgba(0, 0, 0, 0.25) 0px 0.125em 0.5em, rgba(255, 255, 255, 0.1) 0px 0px 0px 1px inset;\n    margin: 0% 1%;\n  }\n  .list-of-trades{\n    padding:1%;\n    width: 50%;\n    font-size: 16px;\n    box-shadow: rgba(0, 0, 0, 0.25) 0px 0.0625em 0.0625em, rgba(0, 0, 0, 0.25) 0px 0.125em 0.5em, rgba(255, 255, 255, 0.1) 0px 0px 0px 1px inset;\n\n  }\n\n\n  h4{\n    font-size: 180%;\n    border-bottom: 4px solid #898996;\n  }\n\n\n\n  /* left card CSS begin */\n  .input-flex{\n    display:flex;\n    border: none;\n    border-bottom: 2px solid #6464a3;\n    background: transparent;//#eff1f2;\n    color: #dedfe4;\n    width: 75%;\n    height: 2rem;\n    font-size: 16px;\n    padding-left: 0.5rem;\n    padding-top: 0.325rem;\n    padding-bottom: 0.325rem;\n    margin-bottom: 0.425rem;\n    \n    &:focus, &:hover{\n      outline: none;\n      color: #373641;\n      ::placeholder{\n        color: #898996;\n      }\n      background: #dedfe4;\n    }\n    ::placeholder{\n      color: #dedfe4;\n    }\n  }\n\n  .input-inline{\n    display:inline;\n    border: none;\n    border-bottom: 2px solid #6464a3;\n    background: transparent;//#eff1f2;\n    color: #dedfe4;\n    width:10%;\n    height: 2rem;\n    font-size: 16px;\n    padding-left: 0.5rem;\n    padding-top: 0.325rem;\n    padding-bottom: 0.325rem;\n    margin-bottom: 0.425rem;\n    \n    &:focus, &:hover{\n      outline: none;\n      color: #373641;\n      ::placeholder{\n        color: #898996;\n      }\n      background: #dedfe4;\n    }\n    ::placeholder{\n      color: #dedfe4;\n    }\n  }\n\n  .input-label{\n    color: #898996;\n    font-size: 14px;\n  }\n\n  .input-label-sub{\n    color: #898996;\n    font-style: italic;\n    font-size: 80%;\n    padding-left: 5%;\n    margin-bottom: 2%;\n  }\n\n  .input-select {\n    display:flex;\n    width: 75%;\n    color: #dedfe4;\n    border: none;\n    border-bottom: 2px solid #6464a3;\n    background: transparent;\n    height: 2rem;\n    font-size: 16px;\n    padding-left: 0.5rem;\n    margin-bottom: 0.425rem;\n\n    &:focus, &:hover{\n      outline: none;\n      color: #373641;\n      background: #dedfe4;\n    }\n  }\n\n\n  .calc-button {\n    display: block;\n    cursor: pointer;\n    outline: none;\n    border: none;\n    background-color: #dedfe4;\n    width: 200px;\n    height: 35px;\n    border-radius: 30px;\n    font-size: 18px;\n    font-weight: 600;\n    color: #373641;\n    background-size: 100% 100%;\n    box-shadow: 0 0 0 1px black inset;\n    margin: 1%;\n    margin-top: 3%;\n\n    @media only screen and (max-width: 968px) {\n      width: auto;\n    }\n  }\n  \n  .calc-button:hover {\n    background-image: linear-gradient(\n      145deg,\n      transparent 10%,\n      #89d47f 10% 20%,\n      transparent 20% 30%,\n      #89d47f 30% 40%,\n      transparent 40% 50%,\n      #89d47f 50% 60%,\n      transparent 60% 70%,\n      #89d47f 70% 80%,\n      transparent 80% 90%,\n      #89d47f 90% 100%\n    );\n    animation: background 6s linear infinite;\n\n\n    @media only screen and (max-width: 968px) {\n      width: auto;\n      color: #52515c;\n      background-color: #ebebeb;\n      background-image: none;\n    }\n  }\n\n  .del-button {\n    display: block;\n    cursor: pointer;\n    outline: none;\n    border: none;\n    background-color: #dedfe4;\n    width: 200px;\n    height: 35px;\n    border-radius: 30px;\n    font-size: 18px;\n    font-weight: 600;\n    color: #373641;\n    background-size: 100% 100%;\n    box-shadow: 0 0 0 1px black inset;\n    margin: 1%;\n    \n    margin-top: 3%;@media only screen and (max-width: 968px) {\n      width: auto;\n    }\n  }\n  \n  .del-button:hover {\n    background-image: linear-gradient(\n      145deg,\n      transparent 10%,\n      #d4847f 10% 20%,\n      transparent 20% 30%,\n      #d4847f 30% 40%,\n      transparent 40% 50%,\n      #d4847f 50% 60%,\n      transparent 60% 70%,\n      #d4847f 70% 80%,\n      transparent 80% 90%,\n      #d4847f 90% 100%\n    );\n    animation: background 6s linear infinite;\n    @media only screen and (max-width: 968px) {\n      width: auto;\n      color: #52515c;\n      background-color: #ebebeb;\n      background-image: none;\n    }\n  }\n  \n  @keyframes background {\n    0% {\n      background-position: 0 0;\n    }\n    100% {\n      background-position: 400px 0;\n    }\n  }\n  /* left card CSS end */\n  /* middle card CSS begin */\n  .result-item{\n    border-bottom: 2px solid #6464a3;\n    height: auto;\n    margin-bottom: 4%;\n    padding-bottom: 1%;\n  }\n  .result-title{\n    text-align: left;\n    color: #898996;\n    font-size: 14px;\n    width: 50%;\n  }\n  .result-output{\n    text-align: right;\n    color: #dedfe4;\n    font-size: 16px;\n    width: 50%;\n  }\n\n  /* middle card CSS end */\n  /* right card CSS begin */\n  .trades-scroll{\n    font-size: 12px;\n    background-color: #373641;\n    padding: 1% 3%;\n    width:auto;\n    overflow-y:auto;\n    overflow-x:clip;\n    height: 750px;\n  }\n\n  /* right card CSS end */\n\n`;\n\nexport const Backtest = ({ backtest }) => {\n\n  const defaultTimePeriod = () => {\n    switch(backtest.indicator){\n      case 'RSI': return 14;\n      case 'EMA': return 9;\n      case 'SMA': return 9;\n      case 'BB': return 20;\n      default: return 24;\n    }\n  }\n  const defaultBuyStrat = () => {\n    switch(backtest.indicator){\n      case 'RSI': return 30;\n      case 'EMA': return -3;\n      case 'SMA': return -3;\n      case 'BB': return -3;\n      default: return -3;\n    }\n  }\n\n  // Returns today date in YYYY-MM-DD formate\n  const getTodayDate = () => {\n    return new Date().toISOString().slice(0, 10);\n  }\n\n  // Returns 100 years ago today date in YYYY-MM-DD formate\n  const getOldDate = () => {\n    let myDate = new Date(new Date().setFullYear(new Date().getFullYear() - 100));\n    return myDate.toISOString().slice(0, 10);\n  }\n  \n\n  const [tradeListData, setTradeListData] = useState([]);\n\n  const [seriesType, setSeriesType] = useState('1. open');\n  const [timePeriod, setTimePeriod] = useState(defaultTimePeriod());\n  const [stdDeviation, setStdDeviation] = useState(2);\n  const [startDate, setStartDate] = useState(getOldDate());\n  const [endDate, setEndDate] = useState(getTodayDate());\n\n  const [maxBags, setMaxBags] = useState(5);\n  const [initalBalance, setInitialBalance] = useState(10000);\n  const [initalBuyType, setInitalBuyType] = useState('usd');\n  const [initalBuyAmount, setInitalBuyAmount] = useState(1500);\n  const [buyStrategyValue, setBuyStrategyValue] = useState(defaultBuyStrat());\n  const [buyStrategyType, setBuyStrategyType] = useState('Real Middle Band'); // Used for Bollinger upper/middle/lower\n  const [sellStrategyValue, setSellStrategyValue] = useState(1);\n\n  const { deleteBacktest, current_symbol, cache_TSDA, cache_TSDA_function } = useContext(GlobalContext);\n\n  // Used for JSX dropdown items\n  const dropdownItems = (items) => {\n    return items.map(item => <option value={item.value} key={item.name}>{item.name}</option>);\n  }\n\n  // Calculates USD value for creating a bag\n  function calcInitalBuy(buyType, buyAmount, currentBalance, curStockPrice) {\n    switch(buyType){\n      case \"numStocks\":\n        return curStockPrice*buyAmount;\n      case \"percent\":\n        return currentBalance * (buyAmount/100.00);\n      default:\n        // case \"usd\":\n        return buyAmount;\n\n    }\n  }\n\n  // Function to return true/false for buy condition, given price and indicator values\n  function isBuyConditionMet(buyStrategyValue, curStockPrice, curIndicatorValue) {\n    switch(backtest.indicator){\n      case \"RSI\":\n        return curIndicatorValue < buyStrategyValue;\n      default:\n        // case EMA, SMA, BB (all cases where indicator is a price of stock)\n        return curStockPrice <= (curIndicatorValue * ((100.0 + buyStrategyValue)/100.0))\n    }\n  }\n\n  // Returns JSON name of element for indicator item\n  function getIndicatorJSON() {\n    switch(backtest.indicator){\n      case \"BBANDS\":\n        return buyStrategyType;\n      default:\n        return backtest.indicator;\n\n    }\n  }\n\n  // Finalizes trade, storing buy/sell data into backtest.tradeListData\n  function finalizeTrade(myBag, buyDate, sellDate, candleCountSell, sellPrice, curIndicatorValue, numShares) {\n    const percentChange = (sellPrice/myBag[\"buy-price\"]);\n    const profitUSD = +(percentChange-1)*myBag[\"volume-USD\"];\n    const candleLength = +candleCountSell-myBag[\"candle-count-buy\"];\n    \n    // Push on individual trade data\n    (backtest.tradeListData).push({\n      buyDate,\n      sellDate,\n      buyPrice: myBag[\"buy-price\"],\n      sellPrice,\n      numShares,\n      profitPercent: +percentChange-1,\n      profitUSD,\n      candleLength,\n      indicatorAtSell: curIndicatorValue,\n      indicatorAtBuy: myBag[\"indicator-at-buy\"]\n    });\n\n    // Update results Overview data\n    backtest.numTrades++;\n    backtest.profitUSD += profitUSD;\n    backtest.netBars += candleLength;\n    backtest.netSellVolume += sellPrice * numShares;\n\n    //console.log(\"finalizeTrade called, % change:\", percentChange, buyDate, sellDate);\n  }\n\n  // Runs user specified backtest algorithms and prepares outputs/trades to display\n  async function runBacktests(paperAPICall, pairSettings) {\n    let stockPriceData;\n    let stockIndicatorData;\n    let response;\n\n    // Ensure user has selected a stock\n    if(!current_symbol){\n      alert(\"Please select a stock to test your strategy on.\");\n      return;\n    }\n    \n    // Ensure API json for cache_TSDA exists\n    if(!cache_TSDA['Meta Data']){\n      response = await fetch(`https://www.alphavantage.co/query?function=TIME_SERIES_DAILY_ADJUSTED&symbol=${current_symbol}&outputsize=full&apikey=CQ5JZQYM4DG0OODA`);\n      stockPriceData = await response.json();\n      cache_TSDA_function(stockPriceData);\n\n      // Stop if MAX API\n      if(stockPriceData.Note) return;\n    }else{\n      stockPriceData = cache_TSDA;\n    }\n\n    // Make API call for stockIndicatorData\n    let optionalParameters;\n    switch(backtest.indicator){\n      case 'BBANDS':\n        optionalParameters = `&nbdevup=${pairSettings.stdDeviation}&nbdevdn=${pairSettings.stdDeviation}`;\n        break;\n      default:\n        optionalParameters = '';\n    }\n    response = await fetch(`https://www.alphavantage.co/query?function=${backtest.indicator}&symbol=${current_symbol}&interval=daily&time_period=${paperAPICall.timePeriod}&series_type=${paperAPICall.seriesType}${optionalParameters}&apikey=CQ5JZQYM4DG0OODA`);\n    stockIndicatorData = await response.json();\n    // Catches MAX API\n    if(stockIndicatorData.Note){\n      alert(\"MAX API CALLS. Please wait a minute for more. Thank you for visitng my project! However, it was built using Alpha Vantage's standard API where the call frequency is 5 calls per minute and 500 calls per day.\");\n      return;\n    }\n\n    // Initalize bags/candle-count/currentBalance\n    let candleCount = 0;\n    let bagList = {};\n    bagList.length = 0;\n    let currentBalance = pairSettings.initalBalance;\n    let startDateReached = false;\n    // Initalize single integer to know lowest price I consider selling at(updated when new bags are added)\n    let lowestSellPrice = 0;\n    // Main loop that runs the paper trading bot algo, maintains bags/buys/sells/etc throughout 5 years (1265 trading days)\n    // Note: in the following for loop: key == date\n    for(let [key] of Object.entries(stockIndicatorData[`Technical Analysis: ${backtest.indicator}`]).reverse()){\n      // Enables iterator code to run once start date reached/passed\n      if(key>=startDate){\n        startDateReached = true;\n      }\n      // Skips iterator because start date not reached\n      if(startDateReached === false){\n        continue;\n      }else if(key===endDate){\n        // End date reached... so stop iterating.\n        break;\n      }\n\n      // Count Candles interated over\n      candleCount++;\n      \n      // Skip days where no price exists\n      if(!stockPriceData[\"Time Series (Daily)\"][`${key}`]) continue;\n      // Essential values for iterating stock data\n      let curIndicatorValue = +stockIndicatorData[`Technical Analysis: ${backtest.indicator}`][`${key}`][`${getIndicatorJSON()}`];\n      let curStockPrice = +stockPriceData[\"Time Series (Daily)\"][`${key}`][`${paperAPICall.seriesType}`];\n\n      // First price of start date\n      if(!backtest.startPrice){\n        backtest.startPrice = curStockPrice;\n      }\n      // Maintain oldest price\n      backtest.endPrice = curStockPrice;    \n\n      // Prospective USD to create a new bag\n      const newBagVolume = calcInitalBuy(pairSettings.initalBuyType, pairSettings.initalBuyAmount, currentBalance, curStockPrice);\n\n      // If Buy condition: Bags open, balance sufficient, price meets indicator limit\n      if(bagList.length<pairSettings.maxBags && newBagVolume <= currentBalance && isBuyConditionMet(pairSettings.buyStrategyValue, curStockPrice, curIndicatorValue)){\n        // Create and add bag to bagList, increment bagList.length. Automatically added by creating key.\n        bagList.length++;\n        console.log(\"bag added\");\n        bagList[`${key}`] = {\n          \"sell-price-limit\": +(1+(pairSettings.sellStrategyValue/100)) * curStockPrice,\n          \"buy-price\": +curStockPrice,\n          \"candle-count-buy\": +candleCount,\n          \"volume-USD\": +newBagVolume,\n          \"num-shares\": +newBagVolume/curStockPrice,\n          \"indicator-at-buy\": curIndicatorValue\n        }\n\n        // Update currentBalance\n        currentBalance -= bagList[`${key}`][\"volume-USD\"];\n\n        // Update lowestSellPrice, min of current lowest, or new buy price is lower. Initialize if only 1 bag.\n        if(bagList.length===1){\n          lowestSellPrice = +bagList[`${key}`][\"sell-price-limit\"];\n        }else{\n          lowestSellPrice = Math.min(lowestSellPrice, bagList[`${key}`][\"sell-price-limit\"]);\n        }\n      // Else If Sell Condition\n      }else if(curStockPrice>= lowestSellPrice && bagList.length>0){\n        // Store key of buy date(below loop has new key in smaller scope)\n        let sellDate = key;\n        for(let [key] of Object.entries(bagList)){ \n          if(curStockPrice >= bagList[`${key}`][\"sell-price-limit\"]){\n            // Finalize Trade function records trade data into backtest to display in JSX below\n            finalizeTrade(bagList[`${key}`], key, sellDate, candleCount, curStockPrice, curIndicatorValue, bagList[`${key}`][\"num-shares\"], bagList[`${key}`][\"indicator-at-buy\"]);\n            delete bagList[`${key}`];\n            bagList.length--;\n          }\n        }\n\n        // If bags exist, update to new lowest price\n        const newBagListKeys = Object.entries(bagList);\n        if(newBagListKeys[0][1]>0){\n          lowestSellPrice = bagList[newBagListKeys[1][0]][\"sell-price-limit\"];\n          for(let [key] of newBagListKeys){ \n            lowestSellPrice = Math.min(lowestSellPrice, +bagList[`${key}`][\"sell-price-limit\"]);\n          }\n        }\n      }\n      // End of Buy/Sell conditions\n    }\n    \n    console.log(\"iterating done\", backtest, startDate, endDate, backtest.holdReturn);\n    // Iterating complete, finalize some data on compelted backtest algorithm\n    backtest.holdReturn = (((backtest.endPrice / backtest.startPrice)-1) * 100).toFixed(2);\n    console.log(\"set holdret\", backtest.holdReturn, \"end/start\", backtest.endPrice, backtest.startPrice);\n    delete backtest.startPrice;\n    backtest.profitPercentOnBalance = backtest.profitUSD / pairSettings.initalBalance;\n    backtest.profitPercentOnTrades = backtest.profitUSD / (backtest.netSellVolume - backtest.profitUSD);\n    backtest.avgBars = backtest.netBars / backtest.numTrades;\n    \n    // Update results display and sends tradeListData to TradeList.js in JSX below\n    setTradeListData(backtest.tradeListData);\n  }\n\n  const onSubmit = () => {\n    backtest.current_symbol = current_symbol;\n\n    const paperAPICall = { \n      // Relavent variables that are global: current_symbol, interval(daily), backtest.indicator(ex, RSI)\n      seriesType: seriesType,\n      timePeriod: +timePeriod,\n      stdDeviation: +stdDeviation\n    };\n\n    const pairSettings = {\n      maxBags: +maxBags,\n      initalBalance: +initalBalance,\n      initalBuyType: initalBuyType,\n      initalBuyAmount: +initalBuyAmount,\n      buyStrategyValue: +buyStrategyValue,\n      buyStrategyType, // used for Bollinger upper/middle/lower\n      sellStrategyValue: +sellStrategyValue\n    }\n\n    // Ensure no trivial strategies are submitted\n    if(pairSettings.maxBags<1 || pairSettings.initalBalance<1 || pairSettings.initalBuyAmount<1 || pairSettings.sellStrategyValue<0 || paperAPICall.timePeriod<1){\n      // Bags, balance, timeperiod, buy amount, sell gain% must be positive\n      alert(\"Please enter valid inputs. Use positive integers for the following: Max bags, Sell percentage, Time period, Buy amount, Inital Balance.\");\n    }else if(pairSettings.initalBuyType==='percent' && (pairSettings.initalBuyAmount<1 || pairSettings.initalBuyAmount>100)){\n      // if(buy type is percent) buy amount must be (0-100]\n      alert(\"Buy amount percentage must be 1-100%\");\n    }else if (pairSettings.initalBuyAmount>pairSettings.initalBalance){\n      // inital buy must be < inital balance\n      alert(\"Inital buys must be less than or equal to inital balance.\");\n    }else if(backtest.indicator==='RSI' && (pairSettings.buyStrategyValue<1 || pairSettings.buyStrategyValue>99)){\n      // Ensure no trivial strategy specific settings are submitted <connect to previous if chain thing>\n      alert(\"RSI values must be between 1-99\");\n    }else if(backtest.indicator==='BBANDS' && paperAPICall.stdDeviation<0.5){\n      // Ensure no trivial BB std deviation\n      alert(\"Standard Deviation must be greater than or equal to 0.5.\");\n    }else{\n      // Calculation inputs valid\n      console.log(pairSettings);\n\n      // Initialize Trade List Data(for final results)\n      backtest.tradeListData = [];\n      backtest.profitUSD = 0;\n      backtest.numTrades = 0;\n      backtest.netBars = 0;\n      backtest.netSellVolume = 0; // Net volume USD sold\n\n      // Run backtest algorithm\n      runBacktests(paperAPICall, pairSettings);\n    }\n\n  }\n\n  let indicatorSettingDOM = null;\n  switch(backtest.indicator){\n    case 'RSI':\n      indicatorSettingDOM = (<> \n        {/* Time Period(# candles in calc) */}\n          <label className=\"input-label\" >Time Period:</label>\n          <input className=\"input-flex\" placeholder='14' onChange={(e) => setTimePeriod(e.target.value)} />\n      </>);\n      break;\n    case 'EMA':\n      indicatorSettingDOM = (<> \n        {/* Time Period(# candles in calc) */}\n        <label className=\"input-label\">Time Period: </label>\n        <input className=\"input-flex\" placeholder=\"9\" onChange={(e) => setTimePeriod(e.target.value)} />\n      </>);\n      break;\n    case 'SMA':\n      indicatorSettingDOM = (<> \n        {/* Time Period(# candles in calc) */}\n        <label className=\"input-label\">Time Period:</label>\n        <input className=\"input-flex\" placeholder=\"9\" onChange={(e) => setTimePeriod(e.target.value)} />\n      </>);\n      break;\n    case 'BBANDS':\n      indicatorSettingDOM = (<> \n        {/* Time Period(# candles in calc) */}\n        <label className=\"input-label\">Time Period: </label>\n        <input className=\"input-flex\" placeholder=\"20\" onChange={(e) => setTimePeriod(e.target.value)} />\n\n        {/* Standard deviation for both top/bot lines */}\n        <label className=\"input-label\">Standard Deviation for upper/lower lines:</label>\n        <input className=\"input-flex\" placeholder=\"2\" onChange={(e) => setStdDeviation(e.target.value)} />\n      </>);\n      break;\n    default:\n      indicatorSettingDOM = (<div>Default backtest indicator DOM</div>);\n    \n  }\n\n  let buyStrategyDOM = null;\n  switch(backtest.indicator){\n    case 'RSI':\n      buyStrategyDOM = (<> \n        {/* Buy Strategy RSI */}\n        <label className=\"input-label\">Buy when RSI less than</label>\n        <input className=\"input-inline\" placeholder='30' onChange={(e) => setBuyStrategyValue(e.target.value)} />\n        <br/>\n      </>);\n      break;\n    case 'EMA':\n      buyStrategyDOM = (<> \n        {/* Buy strategy % away */}\n        <label className=\"input-label\">Buy at price</label>\n        <input className=\"input-inline\" placeholder=\"-3\" onChange={(e) => setBuyStrategyValue(e.target.value)}/>\n        <label className=\"input-label\">% away from the EMA line. </label>\n        <label className=\"input-label-sub\">(3 = 3% above, -3 = 3% below)</label>\n        <br/>\n      </>);\n      break;\n    case 'SMA':\n      buyStrategyDOM = (<> \n        {/* Buy strategy % away */}\n        <label className=\"input-label\">Buy at price</label>\n        <input className=\"input-inline\" placeholder=\"-3\" onChange={(e) => setBuyStrategyValue(e.target.value)}/>\n        <label className=\"input-label\">% away from the SMA line. </label>\n        <label className=\"input-label-sub\">(3 = 3% above, -3 = 3% below)</label>\n        <br/>\n      </>);\n      break;\n    case 'BBANDS':\n      buyStrategyDOM = (<> \n        {/* Buy strategy % away (BB) */}\n        <label className=\"input-label\">Band to follow:</label>\n        <select className=\"input-select\" onChange={(e) => setBuyStrategyType(e.target.value)}>\n          {dropdownItems([\n            {name:'Middle', value:'Real Middle Band'},\n            {name:'Upper', value:'Real Upper Band'},\n            {name:'Lower', value:'Real Lower Band'}\n          ])}\n        </select>\n        \n        <label className=\"input-label\">Buy at price</label>\n        <input className=\"input-inline\" placeholder=\"-3\" onChange={(e) => setBuyStrategyValue(e.target.value)}/>\n        <label className=\"input-label\">% away from the selected line. </label>\n        <label className=\"input-label-sub\">(3 = 3% above, -3 = 3% below)</label>\n        <br/>\n      </>);\n      break;\n    default:\n      buyStrategyDOM = (<div>buy strat dom default</div>);\n    \n  }\n\n  return (\n    <CSS>\n      <div className='settings'>\n        {/* Beginning of Settings */}\n        <h4>{backtest.indicator} Settings</h4>\n\n        {/* series type */}\n        <label className=\"input-label\">Select Series Type:</label>\n        <select className=\"input-select\" onChange={(e) => setSeriesType(e.target.value)}>\n          {dropdownItems([\n            {name:'open', value:'1. open'},\n            {name:'close', value:'4. close'},\n            {name:'high', value:'2. high'},\n            {name:'low', value:'3. low'}])}\n        </select>\n        \n        {indicatorSettingDOM}\n\n        <br/>\n\n        <h4>Trading Strategy Settings</h4>\n\n        {/* Begin date for backtest */}\n        <label className=\"input-label\">Start Date:</label>\n        <input className=\"input-flex\" type=\"date\" value={getOldDate()} onChange={(e) => setStartDate(e.target.value)} />\n\n        {/* End date for backtest */}\n        <label className=\"input-label\">End Date:</label>\n        <input className=\"input-flex\" type=\"date\" value={getTodayDate()} onChange={(e) => setEndDate(e.target.value)} />\n              \n        {/* Max number bags */}\n        <label className=\"input-label\">Max number of bags:</label>\n        <input className=\"input-flex\" placeholder=\"5\" onChange={(e) => setMaxBags(e.target.value)} />\n\n        {/* Inital balance */}\n        <label className=\"input-label\">Inital balance (USD):</label>\n        <input className=\"input-flex\" min=\"0\" placeholder=\"10000\" onChange={(e) => setInitialBalance(e.target.value)} />\n\n        {/* Inital buy (type/amount) */}\n        <label className=\"input-label\">Inital buy type:</label>\n        <select className=\"input-select\" onChange={(e) => setInitalBuyType(e.target.value)}>\n          {dropdownItems([\n            {name:'($) USD', value:'usd'},\n            {name:'(%) Percent of Balance', value:'percent'},\n            {name:'(#) Number of Stocks', value:'numStocks'}\n          ])}\n        </select>\n\n        <label className=\"input-label\">Inital buy amount:</label>\n        <input className=\"input-flex\" min=\"0\" placeholder=\"1500\" onChange={(e) => setInitalBuyAmount(e.target.value)} />\n\n        {buyStrategyDOM}\n\n        {/* Sell Strategy */}\n        <label className=\"input-label\">Sell bags at</label>\n        <input className=\"input-inline\" placeholder=\"1\" onChange={(e) => setSellStrategyValue(e.target.value)} />\n        <label className=\"input-label\">% profit.</label>\n        <br/>\n\n        {/* submit button */}\n        <button className=\"calc-button\" onClick={() => onSubmit()}>Calculate</button>\n\n\n        {/* close button */}\n        <button className=\"del-button\" onClick={() => deleteBacktest(backtest.id)} >Delete</button>\n      </div>\n      {/* end of settings, beginning of results overview */}\n\n      <div className='results-overview'>\n        <h4>Performance Overview {backtest.current_symbol?\"(\"+backtest.current_symbol+\")\":\"\"}</h4>\n        <div className=\"result-item\">\n          <label className=\"result-title\">Profit USD:</label>\n          <label className=\"result-output\">${(backtest.profitUSD?backtest.profitUSD:0).toFixed(2)}</label>\n        </div>\n        <div className=\"result-item\">\n          <label className=\"result-title\">Profit Percent on Entire Balance: </label>\n          <label className=\"result-output\">{(backtest.profitPercentOnBalance ? 100*backtest.profitPercentOnBalance : 0).toFixed(2)}%</label>\n        </div>\n        <div className=\"result-item\">\n          <label className=\"result-title\">Average profit per trade: </label>\n          <label className=\"result-output\"> {(backtest.profitPercentOnTrades?100*backtest.profitPercentOnTrades:0).toFixed(2)}%</label>\n        </div>\n        <div className=\"result-item\">\n          <label className=\"result-title\">Number of trades: </label>\n          <label className=\"result-output\">{backtest.numTrades? backtest.numTrades:0}</label>\n        </div>\n        <div className=\"result-item\">\n          <label className=\"result-title\">Average bars per trade: </label>\n          <label className=\"result-output\">{(backtest.avgBars?backtest.avgBars:0).toFixed(2)}</label>\n        </div>\n        <div className=\"result-item\">\n          <label className=\"result-title\">Buy and hold return: </label>\n          <label className=\"result-output\">{backtest.holdReturn>0?\"+\":\"\"}{backtest.holdReturn?backtest.holdReturn:\"0\"}%</label>\n        </div>\n      </div>\n      \n      {/* End of results overview, begin list of trades */}\n\n      <div className='list-of-trades'>\n        <h4>List Of Trades</h4>\n        <div className=\"trades-scroll\">\n          <TradeList tradeList={tradeListData.map(tradeData => tradeData)}/>\n        </div>\n      </div>\n      \n      {/* End list of trades */}\n    </CSS>\n  );\n}\n","import styled from \"styled-components\";\n\nconst CSS = styled.div`\n\n\n  .main-box{\n    color: #898996;\n    display:flex;\n\n    padding: 5%;\n    margin: 5%;\n\n    .intro-text{  \n      padding-top: 10%;\n      width: 50%;\n      text-align: center;\n      p{\n        color: #898996;\n        font-size: 16px;\n      }\n      h4{\n        font-size: 180%;\n        color: #dedfe4;\n      }\n    }\n    .img-chart{\n      width: 65%;\n      transform: perspective(700px) rotateY(-10deg);\n      box-shadow: rgba(0, 0, 0, 0.3) 0px 19px 38px, rgba(0, 0, 0, 0.22) 0px 15px 12px;\n    }\n    .img-backtest{\n      width: 65%;\n      transform: perspective(700px) rotateY(10deg);\n      box-shadow: rgba(0, 0, 0, 0.3) 0px 19px 38px, rgba(0, 0, 0, 0.22) 0px 15px 12px;\n    }\n\n  }\n\n`;\n\nexport const Homepage = () => {\n  return (\n    <CSS>\n      <div className=\"main-box\"> \n        <div className=\"intro-text\">\n          <h4>PeakTrades</h4>\n          <p>\n            Simple, yet powerful tool to visualize stock market data and test strategies for algorithm trading.\n            <br/>\n            PeakTrades is a personal project developed by {\" \"}\n            <a className=\"\" href=\"https://www.linkedin.com/in/benshiao\" rel=\"noreferrer\" target=\"_blank\">Benjamin Shiao</a> \n            {\" \"}using React, Javascript, D3 graphs, and Alphavantages stock API. \n          </p>\n        </div>\n        <img className=\"img-chart\" src=\"chart-img.png\" alt=\"\"/>\n      </div>\n      <div className=\"main-box\"> \n        <img className=\"img-backtest\" src=\"backtest-img.png\" alt=\"\"/>\n        <div className=\"intro-text\">\n          <h4>How Does it Work?</h4>\n          <p>\n            <br/>\n            Search a US listed stock ticker and select a company to visualize their historic stock market data on an \n            interactive candlestick chart.\n            <br/><br/>\n            Select a{\" \"}\n            <a className=\"\" href=\"https://www.investopedia.com/terms/t/technicalindicator.asp\" rel=\"noreferrer\" target=\"_blank\">technical indicator</a> \n            {\" \"}to create a customizable{\" \"}\n            <a className=\"\" href=\"https://www.investopedia.com/terms/b/backtesting.asp\" rel=\"noreferrer\" target=\"_blank\">backtest</a> \n            {\" \"}to visualize the results of your strategy. \n            <br/><br/>\n            Create multiple {\" \"}\n            <a className=\"\" href=\"https://www.investopedia.com/terms/b/backtesting.asp\" rel=\"noreferrer\" target=\"_blank\">backtests</a>  \n            {\" \"}and compare your algorithms using different indicators across different stocks.\n          </p>\n        </div>\n      </div>\n\n\n\n      <div><tpsan>.</tpsan></div>\n    </CSS>\n  )\n}\n","import React, { useContext } from 'react';\nimport styled from \"styled-components\";\nimport { Backtest } from './Backtest';\nimport { Homepage } from './Homepage';\nimport { GlobalContext } from '../context/GlobalState';\n\nconst CSS = styled.div`\n  margin: 0% 3% 0% 3%;\n  padding: 1%;\n\n  background: #373641;\n  border-radius: 10px;\n\n  h3{\n    font-family: 'Lato', sans-serif; \n    font-size: 28px; \n    font-weight: 300; \n    text-align: left;\n    color: #dedfe4;\n  }\n\n`;\n\nexport const BacktestList = () => {\n  const { backtests, current_symbol } = useContext(GlobalContext);\n\n\n  if(current_symbol.length>0){\n    return (\n      <>\n        {backtests.length>0?\n          <CSS>\n            <h3>Strategy Tester</h3>\n            {backtests.map(backtest => (<Backtest key={backtest.id} backtest={backtest} />))}\n          </CSS>\n        :\n          <></>\n        }\n        \n\n        <Homepage/>\n      </>\n      )\n    }else{\n      return (\n        <Homepage/>\n      )\n    }\n}\n","import React, {useContext} from 'react';\nimport styled from \"styled-components\";\nimport uuid from 'uuid';\nimport { GlobalContext } from '../context/GlobalState';\n\n\nconst CSS = styled.div`\n  margin: 3% 3% 0% 3%;\n  padding: 1%;\n\n  h3{\n    font-family: 'Lato', sans-serif; \n    font-size: 28px; \n    font-weight: 300; \n    text-align: left;\n    color: #dedfe4;\n  }\n  \n  .btn {\n    font-size: 80%;\n    font-family: 'Lato', sans-serif; \n    text-align: center;\n    justify-content: center;\n    align-items: center;\n    position: relative;\n    color: white;\n    width: 300px;\n    height: 70px;\n    padding: none;\n    margin: 1%;\n    padding: 0% 1%;\n    transition: all 0.3s;\n    span {\n      transition: all 0.3s;\n      tranform: scale(1, 1);\n    }\n  }\n    \n  .btn::before, .btn::after {\n    content: '';\n    position: absolute;\n    transition: all 0.3s;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    z-index: 1;\n  }\n\n  .btn-one::before {\n    left: 4px;\n    z-index: 1;\n    \n    opacity: 0;\n    background: rgba(255, 255, 255, 0.1);\n    transform: scale(0.1, 1);\n  }\n\n  .btn-one:hover::before {\n    opacity: 1;\n    transform: scale(1, 1);\n  }\n\n  .btn-one::after {\n    transition: all 0.3s;\n    border: 1px solid rgba(255, 255, 255, 0.5);\n  }\n\n  .btn-one:hover::after {\n    transform: scale(1, .1);\n    opacity: 0;\n  }\n  .btn-text{\n    color: #dedfe4;\n  }\n  .plus-icon{\n    filter: invert(1);\n    width: 8%;\n    vertical-align: -8%;\n    margin-right: 3%;\n  }\n\n  background: #373641;\n  border-radius: 10px;\n`;\n\nexport const AddBacktest = () => {\n  const { addBacktest, current_symbol } = useContext(GlobalContext);\n\n  const onSubmit = (indicator) => {\n    const newBacktest = {\n      id: uuid(),\n      indicator\n    }\n    addBacktest(newBacktest);\n  }\n\n\n  if(current_symbol.length>0){\n    return (\n      <CSS>\n        <h3>Create a New Strategy</h3>\n        <button className=\"btn btn-one\" onClick={() => onSubmit('RSI')}>\n          <img className=\"plus-icon\" src=\"https://img.icons8.com/android/24/000000/plus.png\" alt=\"\"/>\n          <tspan className=\"\"> </tspan><tspan className=\"btn-text\">Relative Strength Index (RSI)</tspan>\n        </button>\n        <button className=\"btn btn-one\" onClick={() => onSubmit('EMA')}>\n          <img className=\"plus-icon\" src=\"https://img.icons8.com/android/24/000000/plus.png\" alt=\"\"/>\n          <tspan className=\"btn-text\">Exponential Moving Average (EMA)</tspan>\n        </button>\n        <button className=\"btn btn-one\" onClick={() => onSubmit('SMA')}>\n          <img className=\"plus-icon\" src=\"https://img.icons8.com/android/24/000000/plus.png\" alt=\"\"/>\n          <tspan className=\"btn-text\">Simple Moving Average (SMA)</tspan>\n        </button>\n        <button className=\"btn btn-one\" onClick={() => onSubmit('BBANDS')}>\n          <img className=\"plus-icon\" src=\"https://img.icons8.com/android/24/000000/plus.png\" alt=\"\"/>\n          <tspan className=\"btn-text\">Bollinger Bands (BB)</tspan>\n        </button>\n      </CSS>\n      )\n    }else{\n      return (\n        <>\n        {/** make a <about> element that  */}\n        </>\n      )\n    }\n}\n","import React from \"react\";\nimport classNames from \"classnames\";\n\nconst Candle = props => {\n  const { data, x, candle_width, pixelFor } = props;\n\n  const up = data.close > data.open;\n  const bar_top = pixelFor(up ? data.close : data.open);\n  const bar_bottom = pixelFor(up ? data.open : data.close);\n  const bar_height = bar_bottom - bar_top;\n  const wick_top = pixelFor(data.high);\n  const wick_bottom = pixelFor(data.low);\n  return (\n    <>\n      <rect\n        x={x - candle_width / 2}\n        y={bar_top}\n        width={candle_width}\n        height={data.open===data.close? 1 :Math.abs(bar_height)}\n        className={classNames({\n          candle: true,\n          up: up,\n          down: !up\n        })}\n      />\n      <line\n        className={classNames({\n          wick: true,\n          top: true,\n          up: up,\n          down: !up\n        })}\n        x1={x}\n        y1={bar_top}\n        x2={x}\n        y2={wick_top}\n      />\n      <line\n        className={classNames({\n          wick: true,\n          bottom: true,\n          up: up,\n          down: !up\n        })}\n        x1={x}\n        y1={bar_bottom}\n        x2={x}\n        y2={wick_bottom}\n      />\n    </>\n  );\n};\n\nexport default Candle;\n","import React from \"react\";\nimport classNames from \"classnames\";\n\nconst CrossHairs = props => {\n  const { x, y, chart_dims } = props;\n\n  if (x + y === 0) {\n    return <></>;\n  }\n\n  return (\n    <>\n      <line\n        x1={0}\n        y1={y}\n        x2={chart_dims.pixel_width * 1.025}\n        y2={y}\n        className={classNames({\n          cross_hair: true,\n          horz: true\n        })}\n      />\n      <line\n        x1={x}\n        y1={0}\n        x2={x}\n        y2={chart_dims.pixel_height}\n        className={classNames({\n          cross_hair: true,\n          vert: true\n        })}\n      />\n    </>\n  );\n};\n\nexport default CrossHairs;\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\n\nimport Candle from \"./Candle\";\nimport CrossHairs from \"./CrossHairs\";\n\nconst CSS = styled.div`\n  .caret{\n    font-size: 65%;\n  }\n\n  .priceChanges{\n    font-size: 80%;\n  }\n`;\n\nconst Chart = props => {\n  const { data, graph_type, width: chart_width, height: chart_height } = props;\n  // let { last_bar_idx = 0, bars_wide = 40 } = props;\n\n  // last_bar_idx should default to the last bar in the data, or else be sure passed-in value doesn't exceed the last bar\n  // last_bar_idx = last_bar_idx > 0 ? Math.min(last_bar_idx, data.length - 1) : data.length - 1;\n\n  const [mouseCoords, setMouseCoords] = useState({\n    x: -50,\n    y: -50\n  });\n\n  // let mouseCoords = {\n  //   x: 0,\n  //   y: 0\n  // };\n\n  // const setMouseCoords = (x, y) => {\n  //   mouseCoords = { x, y };\n  // };\n\n  // find the high and low bounds of all the bars being sidplayed\n  const dollar_high = Math.max.apply(Math, data.map(bar => +bar.high)) * 1.15;\n  const dollar_low = Math.min.apply(Math, data.map(bar => +bar.low)) * 0.95 ;\n\n  // calculate the candle width\n  const candle_width = Math.floor((chart_width / data.length) * 0.7);\n\n  const chart_dims = {\n    pixel_width: chart_width,\n    pixel_height: chart_height,\n    dollar_high,\n    dollar_low,\n    dollar_delta: dollar_high - dollar_low\n  };\n\n  // toFixed rounds number to 2 decimal places\n  const dollarAt = pixel => {\n    const dollar =\n      (Math.abs(pixel - chart_dims.pixel_height) / chart_dims.pixel_height) *\n        chart_dims.dollar_delta +\n      chart_dims.dollar_low;\n\n    return pixel > 0 ? dollar.toFixed(2) : \"-\";\n  };\n\n  // Gets candlestick data at x position\n  const candleDataAt = pixel => {\n    if(pixel<=0 || pixel >= chart_dims.pixel_width) return \"-\";\n    const candle = data[Math.floor((pixel/ chart_dims.pixel_width) * data.length)];\n\n    return candle;\n  };\n\n  const convertDate = dateString => {\n    if(!dateString) return \"\";\n    const myYear = dateString.substring(2,4);\n    const myMonth = parseInt(dateString.substring(5,7), 10);\n    const myDay = parseInt(dateString.substring(8,10), 10);\n    if(dateString.length===10){\n      return myMonth + \"/\" + myDay + \"/\" + myYear;\n    }\n    const myHour = parseInt(dateString.substring(11,13), 10);\n    const myMinute = dateString.substring(14,16);\n\n    return myMonth + \"/\" + myDay + \"/\" + myYear + \" \" + myHour + \":\" + myMinute + \" EST\";\n  }\n\n  const candleChange = pixel => {\n    if(pixel<=0 || pixel >= chart_dims.pixel_width) return \"\";\n    const candle = data[Math.floor(  (pixel/ chart_dims.pixel_width) * (data.length) )];\n    const change = ((candle['close']/candle['open'])-1) * 100;\n    const posNeg = change >= 0 ? '+' : '-';\n    return posNeg + Math.abs(change).toFixed(2);\n  };\n\n  const pixelFor = dollar => {\n    return -1*(\n      ((dollar - chart_dims[\"dollar_low\"]) / chart_dims[\"dollar_delta\"]) *\n        chart_dims[\"pixel_height\"] -\n        chart_dims[\"pixel_height\"]\n    );\n  };\n\n  const onMouseLeave = () => {\n    setMouseCoords({\n      x: -50,\n      y: -50\n    });\n  };\n\n  const onMouseMoveInside = e => {\n    //for date(x axis), calc using dates[x cord/width] , create dates[]\n    setMouseCoords({\n      x:\n        e.nativeEvent.x -\n        Math.round(e.currentTarget.getBoundingClientRect().left) - candle_width/2,\n      y:\n        e.nativeEvent.y -\n        Math.round(e.currentTarget.getBoundingClientRect().top)\n    });\n  };\n\n  const onMouseClickInside = e => {\n    console.log(`Click at ${e.nativeEvent.offsetX}, ${e.nativeEvent.offsetY}`);\n  };\n\n  // Returns string for mouse off chart display\n  const graphTypeStr = () => {\n    switch(graph_type){\n      case 'day':\n        return \"Yesterday\";\n      case 'week':\n        return \"Past Week\";\n      case 'month':\n        return \"Past Month\";\n      case 'quarter':\n        return \"Past 3 Months\";\n      case 'year':\n        return \"Past Year\";\n      default:\n        return \"Error chart.js\";\n    }\n  };\n\n  // Return JSX for mouse off chart display\n  const mouseOffChartJSX = () => {\n    if(data.length<3) return <></>;\n    const englishStr = <tspan fill='#898996'>{graphTypeStr()}</tspan>;\n    const changePercent = ((data[data.length-1][\"close\"] / data[0][\"open\"]) - 1) * 100 ;\n    const changeUSD = data[data.length-1][\"close\"] - data[0][\"open\"];\n    return <>\n      <tspan className=\"\" fill=\"#dedfe4\">${data[data.length-1][\"close\"]} </tspan>\n      <tspan className=\"caret\" fill={changeUSD>=0?\"#81dfc4\":\"#d75b6d\"}>{changeUSD>=0?\"\":\"\"} </tspan>\n      <tspan className=\"priceChanges\" fill={changeUSD>=0?\"#81dfc4\":\"#d75b6d\"}> ${Math.abs(changeUSD).toFixed(2)} ({changePercent.toFixed(2)}%) </tspan>\n      {englishStr}\n    </>;\n  }\n\n  return (\n    <CSS>\n    <svg\n      width={chart_width*1.025 /* Extra width to fit price */}\n      height={chart_height}\n      className=\"chart\"\n      onMouseMove={onMouseMoveInside}\n      onClick={onMouseClickInside}\n      onMouseLeave={onMouseLeave}\n    >\n      {data.map((bar, i) => {\n        const candle_x = (chart_width / (data.length)) * (i + 1);\n        return (\n          <Candle\n            key={i}\n            data={bar}\n            x={candle_x}\n            candle_width={candle_width}\n            pixelFor={pixelFor}\n          />\n        );\n      })}\n\n      <CrossHairs x={mouseCoords.x + candle_width/2} y={mouseCoords.y} chart_dims={chart_dims} />\n      {mouseCoords.x>0 && mouseCoords.x<=chart_width? <> \n      {/* Price CrossHair */}\n      <rect x={(chart_width*1.025)-(1+dollarAt(mouseCoords.y).length)*8.2} y={mouseCoords.y-12} width={(1+dollarAt(mouseCoords.y).length)*8.2} height='24' fill=\"gray\" rx='9' ry='9'>{/* background color for price */}</rect>\n      <text x={5 + (chart_width*1.025)-(1+dollarAt(mouseCoords.y).length)*8} y={mouseCoords.y+5} fill=\"white\" fontSize=\"12\">\n        ${dollarAt(mouseCoords.y)}\n      </text>\n      {/* Open/High */}\n      <text x='16' y='20' fontSize=\"12\">\n        <tspan fill='#898996'>Open</tspan> <tspan fill='#dedfe4'>${candleDataAt(mouseCoords.x)['open']}  </tspan>\n        <tspan fill='#898996'>High</tspan> <tspan fill='#dedfe4'>${candleDataAt(mouseCoords.x)['high']}</tspan>\n      </text>\n      {/* Low/Close */}\n      <text x='16' y='40' fontSize=\"12\">\n        <tspan fill='#898996'>Close</tspan> <tspan fill='#dedfe4'>${candleDataAt(mouseCoords.x)['close']}  </tspan>\n        <tspan fill='#898996'>Low</tspan> <tspan fill='#dedfe4'>${candleDataAt(mouseCoords.x)['low']}</tspan>\n      </text>\n      {/* Volume/%change */}\n      <text x='16' y='59' fontSize=\"12\">\n        <tspan fill='#898996'>Volume</tspan> <tspan fill='#dedfe4'>{mouseCoords.x > 0 ?(candleDataAt(mouseCoords.x)['volume']/1000).toFixed(2) + 'K': ''}  </tspan>\n        <tspan fill='#898996'>Change</tspan> <tspan fill={candleChange(mouseCoords.x)>=0?\"#81dfc4\":\"#d75b6d\"}>{candleChange(mouseCoords.x)}%</tspan>\n      </text>\n      {/* Date Time */}\n      <text x='16' y=\"85\" fill='#898996' fontSize='20'>\n        {convertDate(candleDataAt(mouseCoords.x)['xAxis'])} \n      </text>\n      </> : <text x='16' y='40' fontSize=\"25\">{mouseOffChartJSX()}</text>}\n      \n    </svg>\n    </CSS>\n  );\n};\n\nexport default Chart;\n","import React, { useContext, useEffect, useState } from 'react';\nimport Chart from \"./chart-components/Chart\";\nimport styled from \"styled-components\";\n\nimport { GlobalContext } from '../context/GlobalState';\nimport \"../chart.css\";\n\nconst CSS = styled.div`\n\n  .chart-info-area{\n    margin: 0 16% 0 16%;\n  }\n\n  .stock-info{\n    display: flex;\n    align-items: center;\n    width: 110.5%;\n    margin: 2% -5%;\n    padding: 20px 50px 0px 50px;\n    color: #dedfe4;\n    background-color: transparent;//#2e4033;\n    border-radius: 10px;\n    font-family: 'Source Sans Pro', arial, sans-serif;\n    font-size: 16px;\n    font-weight: 200;\n    box-shadow: rgba(0, 0, 0, 0.4) 0px 5px 15px;\n\n    \n    @media only screen and (max-width: 768px) {\n      padding: 2%;\n      font-size: 75%;\n    }\n\n    &-ticker{\n      text-align: left;\n      float: left;\n      width: 33.33333%;\n    }\n    &-company{\n      text-align: center;\n      float: left;\n      width: 33.33333%;\n    }\n    &-updated{\n      text-align: right;\n      float:left;\n      width: 33.33333%;\n    }\n  }\n\n  .chart-buttons{\n    margin: 5px 0 0 16%;\n  }\n  .chart-button{\n    color: #dedfe4;\n    font-size: 16px;\n    padding: 5px 15px;\n    background-color: transparent;\n    margin: 0 10px;\n    border: none;\n    border-radius: 10px;\n\n    &:hover,&:focus {\n        background: #101010;\n        outline: none;\n        box-shadow: rgba(0, 0, 0, 0.4) 0px 3px 10px;\n    }\n  }\n`;\n\n// Hook for dynamic window size\nfunction useWindowSize() {\n  // Initialize state with undefined width/height so server and client renders match\n  // Learn more here: https://joshwcomeau.com/react/the-perils-of-rehydration/\n  const [windowSize, setWindowSize] = useState({\n    width: undefined,\n    height: undefined,\n  });\n\n  useEffect(() => {\n    // Handler to call on window resize\n    function handleResize() {\n      // Set window width/height to state\n      setWindowSize({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n    }\n    \n    // Add event listener\n    window.addEventListener(\"resize\", handleResize);\n    \n    // Call handler right away so state gets updated with initial window size\n    handleResize();\n    \n    // Remove event listener on cleanup\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []); // Empty array ensures that effect is only run on mount\n\n  return windowSize;\n}\n\nexport const GraphSection = () => {\n  //grab global variables/functions to call in this file\n  const { graphData_AV_API, graphSymbol, current_symbol, current_company, graph_type } = useContext(GlobalContext);\n\n  const myWindow = useWindowSize();\n  const chart_width = myWindow.width*2/3;\n  const chart_height = myWindow.height*2/3;\n\n  // Processes update to API call and sends data to candlestick chart.\n  const processGraphData = () => {\n    let time_series_type;\n    if(graphData_AV_API['Time Series (15min)']){\n      time_series_type = 'Time Series (15min)';\n    }else if(graphData_AV_API['Time Series (60min)']){\n      time_series_type = 'Time Series (60min)';\n    }else{//if(graphData_AV_API['Time Series (Daily)']){\n      time_series_type = 'Time Series (Daily)';\n    }\n    const time_series_isDaily = time_series_type === 'Time Series (Daily)' ? true : false;\n    let split_ratio = 1.0;\n\n    //this arrays are sus\n    let graphDataProcessed = [];\n    let i = 0\n\n    let date_counter = 0;\n    let previous_date = '';\n    let stop_graphing = false;\n    // Iterate/translate API call to fit my charts inputs\n    for(let myDate in graphData_AV_API[time_series_type]){\n      // Counts unique dates, stops graphing according to graph_Type\n      if( !(previous_date===myDate.substr(0,10)) ){\n        previous_date = myDate.substr(0,10);\n        date_counter++;\n        \n        switch(graph_type){\n            case 'day':\n                if(date_counter>1) stop_graphing = true;\n                break;\n            case 'week':\n                if(date_counter>5) stop_graphing = true;\n                break;\n            case 'month':\n                if(date_counter>20) stop_graphing = true;\n                break;\n            case 'quarter':\n                if(date_counter>60) stop_graphing = true;\n                break;\n            case 'year':\n                if(date_counter>253) stop_graphing = true;\n                break;\n            default:\n        }\n        if(stop_graphing) break;\n      }\n\n      // Some API data open==close==high==low, resulting in candles of size 0x0, resulting in empty graph. \n      // flat_candle ensures candles are never 0x0 (invisible).\n      let flat_candle = +graphData_AV_API[time_series_type][myDate]['1. open']=== +graphData_AV_API[time_series_type][myDate]['4. close'] ? 0.001 : 0;\n      \n      graphDataProcessed.push({\n        \"time\": i++,\n        \"xAxis\": myDate,\n        \"open\": (+graphData_AV_API[time_series_type][myDate]['1. open']/split_ratio).toFixed(2),\n        \"close\": (flat_candle+graphData_AV_API[time_series_type][myDate]['4. close']/split_ratio).toFixed(2),\n        \"high\": (+graphData_AV_API[time_series_type][myDate]['2. high']/split_ratio).toFixed(2),\n        \"low\": (+graphData_AV_API[time_series_type][myDate]['3. low']/split_ratio).toFixed(2),\n        \"volume\": +graphData_AV_API[time_series_type][myDate][time_series_isDaily ? '6. volume' : '5. volume']\n      });\n      if(time_series_isDaily) split_ratio *= +graphData_AV_API[time_series_type][myDate]['8. split coefficient'];\n    }\n    graphDataProcessed.reverse();\n    return graphDataProcessed;\n  };\n\n  // Only for intialization: maybe make it display SPY as default\n  const [data, setData] = useState(() => processGraphData());\n  // Whenever graphData_AV_API is changed, code below will update graph\n  useEffect(() => {\n    if(current_symbol.length>0) setData(processGraphData());\n  }, [graph_type, current_symbol]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  // Convert JS date into easy to read date\n  const convertDate = dateString => {\n    if(!dateString) return \"error\";\n    const myYear = dateString.substring(2,4);\n    const myMonth = parseInt(dateString.substring(5,7), 10);\n    const myDay = parseInt(dateString.substring(8,10), 10);\n    if(dateString.length===10){\n      return myMonth + \"/\" + myDay + \"/\" + myYear;\n    }\n    const myHour = parseInt(dateString.substring(11,13), 10);\n    const myMinute = dateString.substring(14,16);\n\n    return myMonth + \"/\" + myDay + \"/\" + myYear + \" \" + myHour + \":\" + myMinute + \" EST\";\n  }\n\n  if(current_symbol.length>0){\n    return (\n      <>\n      <CSS>\n        <div className=\"chart-info-area\">\n          <div className=\"stock-info\">\n            <p className=\"stock-info-ticker\">Ticker: {current_symbol}</p>\n            <p className=\"stock-info-company\">Name: {current_company}</p>\n            <p className=\"stock-info-updated\">Updated: {convertDate(graphData_AV_API[\"Meta Data\"][\"3. Last Refreshed\"])}</p>\n          </div>\n          <Chart data={data} graph_type={graph_type} width={chart_width} height={chart_height} />\n        </div>\n        <div className=\"chart-buttons\">\n          <button className=\"chart-button\" onClick={() => graphSymbol(current_symbol, current_company,'day', false)}>\n            1D\n          </button>\n          <button className=\"chart-button\" onClick={() => graphSymbol(current_symbol, current_company,'week', false)}>\n            1W\n          </button>\n          <button className=\"chart-button\" onClick={() => graphSymbol(current_symbol, current_company, 'month', false)}>\n            1M\n          </button>\n          <button className=\"chart-button\" onClick={() => graphSymbol(current_symbol, current_company, 'quarter', false)}>\n            3M\n          </button>\n          <button className=\"chart-button\" onClick={() => graphSymbol(current_symbol, current_company, 'year', false)}>\n            1Y\n          </button>\n        </div>\n      </CSS>\n      </>\n    )\n  }else{\n    return (\n      <>\n      </>\n    )\n  }\n}\n\n\n","import React from 'react';\nimport { Header } from './components/Header';\nimport { BacktestList } from './components/BacktestList';\nimport { AddBacktest } from './components/AddBacktest';\nimport { GraphSection } from './components/GraphSection';\nimport styled from \"styled-components\";\n\nimport { GlobalProvider } from './context/GlobalState';\n\nimport './App.css';\n\n\nconst CSS = styled.div`\n  // background: linear-gradient(-75deg, #9dc88d, #4d774e, #164a41);\n  // background-size: 100% 200%;\n\n  background: #3d3d4a;\n  }\n`;\n\nfunction App() {\n  return (\n    <GlobalProvider>\n      <CSS>\n      <Header />\n      <GraphSection />\n      <AddBacktest />\n      <BacktestList />\n      </CSS>\n    </GlobalProvider>\n  );\n}\n\nexport default App;\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}